[tool.poetry]
name = "nldi-py"
version = "0.1.0"
description = "The Hydro Network Linked Data Index (NLDI) puts a restful application programming interface (API) in front of the National Hydrolography dataset (NHD). Now, instead of needing to be a GIS professional, any web developer can build tools against the core data in the NHD in a scalable, workable way."
authors = ["Benjamin Webb <bwebb@lincolninst.edu>"]
# maintainers = [ "Benjamin Webb <bwebb@lincolninst.edu>"]
license = "CC0" # See  https://spdx.org/licenses/
readme = "README.md"

homepage="https://github.com/internetofwater/nldi-py"
repository="https://github.com/internetofwater/nldi-py"
keywords = [    'usgs',    'nldi',    'nhgf',    'nhd' ]

classifiers=[   # see https://pypi.org/classifiers/
        'Development Status :: 4 - Beta',
        'Environment :: Console',
        'Intended Audience :: Developers',
        'Intended Audience :: Science/Research',
        'License :: CC0 1.0 Universal (CC0 1.0) Public Domain Dedication',
        'Operating System :: OS Independent',
        'Programming Language :: Python',
        'Topic :: Scientific/Engineering :: Atmospheric Science',
        'Topic :: Scientific/Engineering :: GIS',
        'Topic :: Scientific/Engineering :: Information Analysis'
    ]

packages= [ {include = "nldi", from = "src" } ]

[tool.poetry.scripts]
nldi = "nldi.cli:main"


[tool.poetry.dependencies]
python = "^3.10"
click = ">7,<=8"
pygeoapi = "^0.17.0"
pydantic = "^1.10.17"
flask = "^2.2.5"
gevent = "^24.2.1"
psycopg2 = "^2.9.9"
pygeofilter = {extras = ["backend-sqlalchemy"], version = "^0.2.4"}
geoalchemy = "^0.7.2"
gunicorn = "^22.0.0"
pygeoif = "^1.5.0"
jsonschema = "^4.23.0"


[tool.ruff]
fix = true
line-length = 120

[tool.ruff.format]
quote-style = "double"

[tool.ruff.lint]
select = ["N", "D", "I", "E", "W", "S"]
extend-safe-fixes = ["D200"]
pydocstyle = { convention = "pep257" }
ignore = [
  "S311",
  "E501", # line too long
  "D211", # no blank line before section
  "D212", # no blank line after section
  "D400", # first line should end with a period
  "D105", # missing docstring in magic method
  "D107", # missing docstring in __init__
]

[tool.ruff.lint.per-file-ignores]
# tests can do some things that are not desirable in production code
"tests/*" = [
  "S101", # allowed to use asserts
]

[tool.pytest.ini_options]
addopts = "--tb=short -p no:warnings"
markers = [
    "order: sets the order of the tests",
    "unittest: unit tests",
    "integration: integration tests which have out-of-process dependencies",
    ]

[tool.coverage.report]
show_missing = true

[tool.mypy]
strict = false
pretty = true
show_column_numbers = true
show_error_context = true
ignore_missing_imports = true

[tool.virtualenvs]
in-project = true


[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"